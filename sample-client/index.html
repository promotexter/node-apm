<html ng-app="myApp">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<script src="bower_components/sockjs/sockjs.min.js"></script>
<script src="bower_components/stomp-websocket/lib/stomp.min.js"></script>
<script src="bower_components/ng-stomp/ng-stomp.min.js"></script>



<!-- BOOTSTRAP -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">


<body>

<div ng-controller="ctrl">

	<div class="container">

		<div class="row">
			<div class="col-lg-12">
				<form class="form-inline">
					<div class="form-group">
						<label>Rabbit Server</label>
						<input type="form-control" ng-model="config.rabbit_server">
					</div>
					<div class="form-group">
						<label>Channel</label>
						<input type="form-control" ng-model="config.channel">
					</div>
					<button class="btn btn-primary" ng-click="updateConfig(config);">Submit</button>
				</form>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
				<h2>log</h2>
				<p><textarea id="log" cols="80" rows="20"></textarea></p>
			</div>

			<div class="col-lg-6">
				<h2>Messages</h2>
				<table class="table table-condensed" width="100%">
					<tr>
						<th>Source</th>
						<th>Metrics</th>
					</tr>
					<tr ng-repeat="(kk, vv) in metrics">
						<td width="30%">{{ kk }}</td>
						<td width="">
							
							<table class="table table-condensed" width="100%" ng-repeat='(kkk, vvv ) in vv.data'>
								<tr ng-repeat='(kkkk, vvvv ) in vvv'> 
									<td width="25%">{{ kkk }}</td>
									<td width="50%">{{ kkkk }}</td>
									<td > <p class="pull-right">{{ vvvv.value | number : 2}}</p></td>
								</tr>
							</table>
							
						</td>
						<!-- <td>{{ d.type }} </td> -->
						<!-- <td>{{ d.metrics }}</td> -->
					</tr>
				</table>

				<!-- {{ metrics }} -->
				<!-- {{ message }} -->
				<!-- {{ payload }} -->
			</div>
		</div>
	</div>
</div>

<script src="app.js"></script>
<script src="ctrl.js"></script>

</body>
</html>